#!/bin/bash

IS_JETSON_PLATFORM=`uname -i | grep aarch64`

export PATH=$PATH:/usr/src/tensorrt/bin

#detection
#for instance segmentation
#for mask2former
echo "Building Model mask2former..."
mkdir  -p  models/mask2former/1
trtexec --onnx=./models/mask2former/mask2former.onnx --fp16 --saveEngine=./models/mask2former/1/mask2former.onnx_b1_gpu0_fp16.engine \
 --minShapes=inputs:1x3x800x800 --optShapes=inputs:1x3x800x800 --maxShapes=inputs:1x3x800x800 --precisionConstraints=obey \
 --layerPrecisions=/post_processor/Div:fp32,/post_processor/ReduceSum:fp32,/post_processor/Add:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/MatMul_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Add_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/Add:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/MatMul:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Div:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Mul_6:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Mul_9:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Cast:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Cast_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Div_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/Add_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/MatMul_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Add_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/MatMul_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Mul_7:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Cast_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Where:fp32,sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Mul_8:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Add_5:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Softmax:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/MatMul_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/multihead_attn/Gemm:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.0/norm/LayerNormalization:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/MatMul_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Add_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/Add_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/MatMul_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Add_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Gemm:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/norm/LayerNormalization:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/Add:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/MatMul:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Div:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Mul_6:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Mul_9:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Cast:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Cast_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Div_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/MatMul_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Mul_7:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Where:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Mul_8:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Add_5:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/Softmax:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.1/multihead_attn/MatMul_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/MatMul_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Add_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/Add_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/MatMul_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Add_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/Add:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/MatMul:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Div:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Mul_6:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Mul_9:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Cast:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Cast_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Div_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/MatMul_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Mul_7:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Cast_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Where:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Mul_8:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Add_5:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Softmax:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/MatMul_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/multihead_attn/Gemm:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.2/norm/LayerNormalization:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/MatMul_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Add_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/MatMul_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Add_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/Add:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/MatMul:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Div:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Mul_6:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Mul_9:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Cast:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Cast_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Div_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/MatMul_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Mul_7:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Where:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Mul_8:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Add_5:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Softmax:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/MatMul_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/multihead_attn/Gemm:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/Add_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.3/norm/LayerNormalization:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/MatMul_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Add_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/MatMul_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Add_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/Add:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/MatMul:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Div:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Mul_6:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Mul_9:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Cast:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Cast_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Div_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/MatMul_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Mul_7:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Cast_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Where:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Mul_8:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Add_5:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Softmax:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/MatMul_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/multihead_attn/Gemm:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/Add_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.4/norm/LayerNormalization:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Add_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/MatMul_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Add_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/MatMul_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/Add:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/MatMul:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Div:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Mul_6:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Mul_9:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Cast:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Cast_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Div_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/MatMul_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Mul_7:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Cast_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Where:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Mul_8:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Add_5:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Softmax:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/MatMul_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/multihead_attn/Gemm:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/Add_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.5/norm/LayerNormalization:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/MatMul_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Add_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/MatMul_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Add_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/Add:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/MatMul:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Div:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Mul_6:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Mul_9:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Cast:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Cast_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Div_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/MatMul_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Mul_7:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Where:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Mul_8:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Add_5:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Softmax:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/MatMul_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/multihead_attn/Gemm:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/Add_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.6/norm/LayerNormalization:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Add_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/MatMul_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Add_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/MatMul_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/Add:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/MatMul:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Div:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Mul_6:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Mul_9:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Cast:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Cast_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Div_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/MatMul_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Mul_7:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Where:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Mul_8:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Add_5:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Softmax:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/MatMul_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/multihead_attn/Gemm:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/Add_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.7/norm/LayerNormalization:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/MatMul_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Add_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/MatMul_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Add_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/Add:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/MatMul:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Add_2:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Div:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Mul_6:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Mul_9:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Cast:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Cast_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Div_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/MatMul_3:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Mul_7:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Where:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Mul_8:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Add_5:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Softmax:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/MatMul_4:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/multihead_attn/Gemm:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/Add_1:fp32,/sem_seg_head/predictor/transformer_cross_attention_layers.8/norm/LayerNormalization:fp32 &


#for segmentation
#citysemsegformer
echo "Building Model citysemsegformer..."
mkdir  -p  models/citysemsegformer/1  && \
trtexec --onnx=./models/citysemsegformer/citysemsegformer.onnx --fp16 \
 --saveEngine=./models/citysemsegformer/1/citysemsegformer.onnx_b1_gpu0_fp16.engine \
 --minShapes="input":1x3x1024x1820 --optShapes="input":1x3x1024x1820 --maxShapes="input":1x3x1024x1820&

#peoplenet_transformer
echo "Building Model peoplenet_transformer"
mkdir -p models/peoplenet_transformer/1
trtexec --onnx=./models/peoplenet_transformer/resnet50_peoplenet_transformer_op17.onnx --fp16 \
 --saveEngine=./models/peoplenet_transformer/1/resnet50_peoplenet_transformer_op17.onnx_b1_gpu0_fp16.engine \
 --minShapes="inputs":1x3x544x960 --optShapes="inputs":1x3x544x960 --maxShapes="inputs":1x3x544x960&

#reidentificationnet
echo "Building Model reidentificationnet"
mkdir -p models/reidentificationnet/1
trtexec --minShapes=input:1x3x256x128 --optShapes=input:8x3x256x128 --maxShapes=input:16x3x256x128 \
 --fp16 --saveEngine=models/reidentificationnet/1/resnet50_market1501_aicity156.onnx_b16_gpu0_fp16.engine \
 --onnx=models/reidentificationnet/resnet50_market1501_aicity156.onnx &

#retail_object_detection_binary_dino
echo "Building Model retail_object_detection_binary_dino"
mkdir -p models/retail_object_detection_binary_dino/1
trtexec --onnx=models/retail_object_detection_binary_dino/retail_object_detection_dino_binary.onnx \
 --saveEngine=models/retail_object_detection_binary_dino/1/retail_object_detection_dino_binary.onnx_b1_gpu0_fp32.engine \
 --minShapes=inputs:1x3x540x960 --optShapes=inputs:1x3x540x960 --maxShapes=inputs:1x3x540x960 \
 --sparsity=enable&

#retail_object_recognition
echo "Building Model retail_object_recognition"
mkdir -p models/retail_object_recognition/1
trtexec --onnx=models/retail_object_recognition/retail_object_recognition.onnx \
 --saveEngine=models/retail_object_recognition/1/retail_object_recognition.onnx_b16_gpu0_fp16.engine \
 --minShapes=input:1x3x224x224 --optShapes=input:16x3x224x224 --maxShapes=input:16x3x224x224 \
 --fp16 --sparsity=enable&

#peoplenet
echo "Building Model peoplenet..."
mkdir  -p  models/peoplenet/1
trtexec --onnx=./models/peoplenet/resnet34_peoplenet_int8.onnx --fp16 \
 --saveEngine=./models/peoplenet/1/resnet34_peoplenet_int8.onnx_b2_gpu0_fp16.engine \
--minShapes="input_1:0":1x3x544x960 --optShapes="input_1:0":2x3x544x960 --maxShapes="input_1:0":2x3x544x960&

#poseclassificationnet
echo "Building Model poseclassificationnet..."
mkdir  -p  models/poseclassificationnet/1
trtexec --onnx=./models/poseclassificationnet/st-gcn_3dbp_nvidia.onnx --fp16 \
--saveEngine=./models/poseclassificationnet/1/st-gcn_3dbp_nvidia.onnx_b4_gpu0_fp16.engine \
--minShapes="input":1x3x300x34x1 --optShapes="input":4x3x300x34x1 --maxShapes="input":4x3x300x34x1&

#bodypose3dnet
echo "Building Model bodypose3dnet..."
mkdir -p models/bodypose3dnet/1
trtexec --onnx=models/bodypose3dnet/bodypose3dnet_accuracy.onnx --fp16 \
	--saveEngine=models/bodypose3dnet/1/bodypose3dnet_accuracy.onnx_b8_gpu0_fp16.engine \
	--minShapes="input0":1x3x256x192,k_inv:1x3x3,t_form_inv:1x3x3,scale_normalized_mean_limb_lengths:1x36,mean_limb_lengths:1x36 \
	--optShapes="input0":8x3x256x192,k_inv:8x3x3,t_form_inv:8x3x3,scale_normalized_mean_limb_lengths:8x36,mean_limb_lengths:8x36 \
	--maxShapes="input0":8x3x256x192,k_inv:8x3x3,t_form_inv:8x3x3,scale_normalized_mean_limb_lengths:8x36,mean_limb_lengths:8x36

#LPD/LPR
echo "Building Models for LPD/LPR..."
mkdir -p models/trafficcamnet/1
trtexec --onnx=models/trafficcamnet/resnet18_trafficcamnet_pruned.onnx --fp16 \
 --saveEngine=models/trafficcamnet/1/resnet18_trafficcamnet_pruned.onnx_b1_gpu0_fp16.engine --minShapes="input_1:0":1x3x544x960 \
 --optShapes="input_1:0":1x3x544x960 --maxShapes="input_1:0":1x3x544x960

mkdir -p models/LPD_us/1
trtexec --onnx=models/LPD_us/LPDNet_usa_pruned_tao5.onnx --fp16 \
 --saveEngine=models/LPD_us/1/LPDNet_usa_pruned_tao5.onnx_b16_gpu0_fp16.engine --minShapes="input_1:0":1x3x480x640 \
 --optShapes="input_1:0":16x3x480x640 --maxShapes="input_1:0":16x3x480x640

mkdir -p models/LPD_ch/1
trtexec --onnx=models/LPD_ch/LPDNet_CCPD_pruned_tao5.onnx --fp16 \
 --saveEngine=models/LPD_ch/1/LPDNet_CCPD_pruned_tao5.onnx_b16_gpu0_fp16.engine --minShapes="input_1:0":1x3x1168x720 \
 --optShapes="input_1:0":16x3x1168x720 --maxShapes="input_1:0":16x3x1168x720

mkdir -p models/LPR_us/1
 trtexec --onnx=models/LPR_us/us_lprnet_baseline18_deployable.onnx --fp16 \
 --saveEngine=models/LPR_us/1/us_lprnet_baseline18_deployable.onnx_b16_gpu0_fp16.engine --minShapes="image_input":1x3x48x96 \
 --optShapes="image_input":8x3x48x96 --maxShapes="image_input":16x3x48x96

mkdir -p models/LPR_ch/1
 trtexec --onnx=models/LPR_ch/ch_lprnet_baseline18_deployable.onnx --fp16 \
 --saveEngine=models/LPR_ch/1/ch_lprnet_baseline18_deployable.onnx_b16_gpu0_fp16.engine --minShapes="image_input":1x3x48x96 \
 --optShapes="image_input":8x3x48x96 --maxShapes="image_input":16x3x48x96
